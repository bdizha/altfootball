{"version":3,"sources":["Dribbles.js","FanbaseForm.js","Follower.js","JoinForm.js","Post.js","Posts.js","ReplyForm.js","Tackles.js","Terms.js","UserForm.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ko-components.js","sourcesContent":["/**\n * Created by batanayi on 2017/08/19.\n */\n\n\n$(function () {\n\n    var DribbleViewModel = function (params) {\n        var self = this;\n\n        self.dribblesCount = ko.observable(params.count);\n        self.hasDribble = ko.observable(Boolean(params.has_dribble));\n        self.type = ko.observable(params.type);\n        self.typeId = ko.observable(params.type_id);\n\n        self.classId = ko.computed(function(){\n            return self.type() + \"-\" + self.typeId();\n        });\n\n        self.save = function () {\n\n            if(new RootViewModel().checkAuth()){\n\n            }\n\n            if(self.hasDribble()){\n                self.dribblesCount(self.dribblesCount() - 1);\n                $(\".\" + self.classId()).removeClass(\"_35GH\");\n            }\n            else{\n                $(\".\" + self.classId()).addClass(\"_35GH\");\n                self.dribblesCount(self.dribblesCount() + 1);\n            }\n\n            $(\".\" + self.classId() + \" ._34IO\").html(self.dribblesCount());\n\n\n            self.hasDribble(!self.hasDribble());\n\n            var dribble = {\n                type_id: self.typeId(),\n                type: self.type()\n            };\n\n            $.ajax(\"/dribble\", {\n                data: ko.toJSON(dribble),\n                type: \"post\",\n                contentType: \"application/json\",\n                success: function (dribble) {\n                }\n            });\n        };\n    };\n\n    ko.components.register('dribbles', {\n        viewModel: DribbleViewModel,\n        template: {element: 'dribbles-template'}\n    });\n});","/**\n * Created by batanayi on 2017/08/19.\n */\n\n\n$(function () {\n\n    var FanbaseFormViewModel = function (params) {\n        var self = this;\n        self.id = ko.observable(params.id ? params.id : '');\n        self.image = ko.observable(params.image ? params.image : '');\n        self.cover = ko.observable(params.cover ? params.cover : '');\n        self.name = ko.observable(params.name ? params.name : '').extend({\n            required: {\n                message: 'Name is required.'\n            }\n        });\n        self.stamp = ko.observable(params.stamp ? params.stamp : '').extend({\n            required: {\n                message: 'Stamp is required.'\n            }\n        });\n        self.description = ko.observable(params.description ? params.description : '');\n        self.access = ko.observable(params.access ? params.access : 'public');\n\n        self.nameLimit = ko.computed(function () {\n            var diff = 24 - self.name().length;\n            if(diff > 0){\n                return diff;\n            }\n            return 0;\n        });\n        self.stampLimit = ko.computed(function () {\n            var diff = 3 - self.stamp().length;\n            if(diff > 0){\n                return diff;\n            }\n            return 0;\n        });\n        self.descriptionLimit = ko.computed(function () {\n            var diff = 80 - self.description().length;\n            if(diff > 0){\n                return diff;\n            }\n            return 0;\n        });\n\n        self.imageFileData = ko.observable({\n            dataURL: ko.observable(params.image ? params.thumb_x : '')\n        });\n\n        self.coverFileData = ko.observable({\n            dataURL: ko.observable(params.cover ? params.cover_x : '')\n        });\n\n        self.imageFileData().dataURL.subscribe(function (dataURL) {\n            self.image(dataURL);\n        });\n\n        self.coverFileData().dataURL.subscribe(function (dataURL) {\n            self.cover(dataURL);\n        });\n        self.focusedName = ko.observable(!!params.name);\n        self.focusedStamp = ko.observable(!!params.stamp);\n        self.focusedDescription = ko.observable(!!params.description);\n\n        self.focusName = function () {\n            self.focusedName(true);\n        };\n        self.focusStamp = function () {\n            self.focusedStamp(true);\n        };\n        self.focusDescription = function () {\n            self.focusedDescription(true);\n        };\n        self.blurName = function () {\n            if (self.name().length === 0) {\n                self.focusedName(false);\n            }\n            self.toggleErrors();\n            self.showAllMessages();\n        };\n        self.blurStamp = function () {\n            if (self.stamp().length === 0) {\n                self.focusedStamp(false);\n            }\n            self.toggleErrors();\n            self.showAllMessages();\n        };\n        self.blurDescription = function () {\n            if (self.description().length === 0) {\n                self.focusedDescription(false);\n            }\n            self.toggleErrors();\n            self.showAllMessages();\n        };\n        self.keyupName = function () {\n            return self.nameLimit() > 0;\n        };\n        self.keyupStamp = function () {\n            return self.stampLimit() > 0;\n        };\n        self.keyupDescription = function () {\n            return self.descriptionLimit() > 0;\n        };\n        self.showAllMessages = function () {\n            FanbaseFormViewModel.errors.showAllMessages();\n        };\n        self.toggleErrors = function () {\n            $(\"._2Kdch\").each(function () {\n                var $this = $(this);\n\n                if ($this.find('span._1u7op').is(':visible')) {\n                    $this.addClass('p5bDW');\n                }\n                else {\n                    $this.removeClass('p5bDW');\n                }\n            });\n        };\n\n        self.canSubmit = ko.computed(function () {\n            return FanbaseFormViewModel.errors().length === 0;\n        });\n\n        self.saveFanbase = function () {\n\n            var fanbase = {\n                image: self.image(),\n                cover: self.cover(),\n                name: self.name(),\n                stamp: self.stamp(),\n                description: self.description(),\n                access: self.access(),\n                id: self.id()\n            };\n\n            $.ajax(\"/fanbase\", {\n                data: ko.toJSON(fanbase),\n                type: \"post\",\n                contentType: \"application/json\",\n                success: function (f) {\n                    var fanbase = ko.utils.parseJson(f);\n                    window.location = '/f/' + fanbase.slug;\n                }\n            });\n\n        };\n    };\n\n    FanbaseFormViewModel.errors = ko.validation.group(FanbaseFormViewModel);\n\n    ko.components.register('fanbase-form', {\n        viewModel: FanbaseFormViewModel,\n        template: {element: 'fanbase-form-template'}\n    });\n});","/**\n * Created by batanayi on 2017/08/19.\n */\n\n\n$(function () {\n\n    var FollowViewModel = function (params) {\n        var self = this;\n\n        self.follower = ko.observable(params.follower);\n        self.classes = ko.observable({\n            items: 'zrN-a _2P1mw _1MC-v _1h78h',\n            fanbase: 'FYAkp _2qvTq _1MC-v _1h78h _2yZ_n _8eFus',\n            user: 'b9xa- _8GOLs _1h78h',\n        });\n        self.isActive = ko.observable(Boolean(params.follower.is_active));\n        self.isInactive = ko.observable(!Boolean(params.follower.is_active));\n        self.activeText = ko.observable(params.active_text);\n        self.inactiveText = ko.observable(params.inactive_text);\n        self.cssClass = ko.computed(function(){\n            return self.classes()[params.class];\n        });\n        self.isList = ko.computed(function(){\n            return params.class === 'items';\n        });\n\n        self.isUser = ko.computed(function(){\n            return params.class === 'user' && self.isInactive();\n        });\n\n        self.save = function () {\n            self.isActive(!self.isActive());\n            self.isInactive(!self.isInactive());\n\n            var follower = {\n                user_id: self.follower().user_id,\n                followable_id: self.follower().followable_id,\n                type: self.follower().type\n            };\n\n            $.ajax(\"/follower\", {\n                data: ko.toJSON(follower),\n                type: \"post\",\n                contentType: \"application/json\",\n                success: function (follower) {\n                }\n            });\n        };\n    };\n\n    ko.components.register('follow', {\n        viewModel: FollowViewModel,\n        template: {element: 'follow-template'}\n    });\n});","/**\n * Created by batanayi on 2017/08/19.\n */\n\n\n$(function () {\n\n    var JoinFormViewModel = function (params) {\n\n        self = this;\n\n        self.email = ko.observable('').extend({\n            required: {\n                message: 'Email is required.'\n            },\n            email: {\n                message: 'Email is invalid.'\n            }\n        });\n\n        // self.token = ko.observable(document.getById(._token);\n\n        self.focusedEmail = ko.observable(false);\n\n        self.isSubmitted = ko.observable(false);\n\n        self.canGo = ko.observable(true);\n\n        self.errors = ko.validation.group(self);\n\n        self.showAllMessages = function () {\n            self.errors.showAllMessages(true);\n\n            var $this = $(\"._34JK span._1u7op\");\n            self.canGo(!$this.is(':visible'));\n        };\n\n        self.focusEmail = function () {\n            self.focusedEmail(true);\n        };\n\n        self.blurEmail = function () {\n            if (self.email.length === 0) {\n                self.focusedEmail(false);\n            }\n\n            self.showAllMessages(true);\n        };\n\n        self.proceed = function () {\n\n            if (self.email.length === 0) {\n                self.canGo(false);\n                return false;\n            }\n\n            self.email.isModified(true);\n\n            self.isSubmitted(true);\n\n            self.showAllMessages();\n\n            if (self.canGo()) {\n\n                self.canGo(false);\n\n                $.ajax(\"/register\", {\n                    data: ko.toJSON({\n                        email: self.email(),\n                        _token: self.token()\n                    }),\n                    type: \"post\",\n                    contentType: \"application/json\",\n                    success: function (response) {\n                        self.canGo(true);\n                        console.log(response);\n                    }\n                });\n            }\n        }\n    };\n\n    ko.components.register('join-form', {\n        viewModel: JoinFormViewModel,\n        template: {element: 'join-form-template'}\n    });\n});","/**\n * Created by batanayi on 2017/11/12\n */\n\n\n$(function () {\n\n    var PostViewModel = function (params) {\n        var self = this;\n\n        self.post = params.post;\n        self.isShowing = ko.observable(false);\n        self.showItem = params.show_item;\n\n        console.log(\"self.post: \");\n\n        self.show = function () {\n            self.isShowing(true);\n            self.showItem(true);\n        };\n\n        self.hide = function () {\n            self.isShowing(false);\n            self.showItem(false);\n        };\n    };\n\n    ko.components.register('post', {\n        viewModel: PostViewModel,\n        template: { element: 'post-template' }\n    });\n});","/**\n * Created by batanayi on 2017/08/19.\n */\n\n\n$(function () {\n\n    var PostsViewModel = function (params) {\n        var self = this;\n\n        self.current = ko.observable(0);\n        self.posts = ko.observableArray([]);\n        self.fanbase = ko.observable(params.fanbase);\n        self.page = ko.observable(params.page);\n\n        self.fetchPosts = function () {\n            var params = {\n                fanbase_id: self.fanbase(),\n                page: self.page()\n            };\n\n            self.page(self.page() + 1);\n\n            $.ajax(\"/posts\", {\n                data: params,\n                type: \"get\",\n                contentType: \"application/json\",\n                success: function (response) {\n\n                    var posts = ko.utils.parseJson(response);\n                    ko.utils.arrayForEach(posts, function (post) {\n                        self.posts.push(post);\n                    });\n\n                    // investigate why this is happening and be open minded\n                    // $(\"._34-mC\").on('click', toogleShare);\n                }\n            });\n        };\n\n        self.fetchPosts();\n    };\n\n    ko.components.register('posts', {\n        viewModel: PostsViewModel,\n        template: {element: 'posts-template'}\n    });\n});","/**\n * Created by batanayi on 2017/08/19.\n */\n\n\n$(function () {\n\n    var ReplyFormViewModel = function (params) {\n        var self = this;\n\n        self.fileData = ko.observable({\n            dataURL: ko.observable()\n        });\n\n        self.image = ko.observable();\n        self.currentUser = ko.observable(params.user);\n        self.comment = ko.observable(params.comment);\n        self.replyText = ko.observable('');\n        self.callback = params.callback;\n        self.canSubmitReply = ko.computed(function () {\n            return self.replyText().length > 0;\n        });\n\n        self.cancel = function () {\n            var allComments = $('._55ghi');\n            allComments.removeClass('_4c7v3');\n        };\n\n        self.fileData().dataURL.subscribe(function (dataURL) {\n            self.image(dataURL);\n        });\n\n        self.saveReply = function () {\n            var reply = {\n                content: self.replyText(),\n                image: self.image(),\n                type: 'comment',\n                type_id: self.comment().id\n            };\n\n            self.replyText('');\n\n            $.ajax(\"/tackle\", {\n                data: ko.toJSON(reply),\n                type: \"post\",\n                contentType: \"application/json\",\n                success: function (reply) {\n                    self.callback(ko.utils.parseJson(reply));\n                }\n            });\n\n        };\n    };\n\n    ko.components.register('reply-form', {\n        viewModel: ReplyFormViewModel,\n        template: {element: 'reply-form-template'}\n    });\n});","/**\n * Created by batanayi on 2017/08/19.\n */\n\n\n$(function () {\n\n    var CommentsViewModel = function (params) {\n        var self = this;\n        self.fileData = ko.observable({\n            dataURL: ko.observable()\n        });\n\n        self.currentUser = ko.observable(params.user);\n        self.type_id = ko.observable(params.type_id);\n        self.isList = ko.observable(params.is_list);\n        self.level = ko.observable(params.level);\n        self.comments = ko.observableArray(params.comments);\n        self.image = ko.observable('');\n        self.currentCommentId = ko.observable(0);\n        self.root = ko.observable(params.root);\n        self.newCommentText = ko.observable('');\n        self.commentsCount = ko.computed(function () {\n            return self.comments().length;\n        });\n\n        self.canSubmitComment = ko.computed(function () {\n            return self.newCommentText().length > 0;\n        });\n\n        self.update = function (reply) {\n            var comments = ko.utils.arrayMap(self.comments(), function (comment) {\n                if (comment.id === reply.type_id) {\n                    comment.comments.unshift(reply);\n                }\n\n                return comment;\n            });\n\n            self.comments([]);\n            self.comments(comments);\n\n            var allComments = $('._55ghi');\n            allComments.removeClass('_4c7v3');\n        };\n\n        self.fileData().dataURL.subscribe(function (dataURL) {\n            self.image(dataURL);\n        });\n\n        self.reply = function (comment) {\n            console.log('#comment-' + comment.id + ' ._55ghi');\n\n            var allComments = $('._55ghi');\n            var activeComment = $('#comment-' + comment.id + ' ._55ghi');\n\n            if (activeComment.hasClass('_4c7v3')) {\n                allComments.removeClass('_4c7v3');\n            }\n            else {\n                allComments.removeClass('_4c7v3');\n                activeComment.addClass('_4c7v3');\n            }\n        };\n\n        self.saveComment = function () {\n            var comment = {\n                type_id: self.type_id(),\n                content: self.newCommentText(),\n                image: self.image(),\n                comments: []\n            };\n\n            self.newCommentText('');\n\n            $.ajax(\"/tackle\", {\n                data: ko.toJSON(comment),\n                type: \"post\",\n                contentType: \"application/json\",\n                success: function (comment) {\n                    self.comments.unshift(ko.utils.parseJson(comment));\n                }\n            });\n        };\n    };\n\n    ko.components.register('comments', {\n        viewModel: CommentsViewModel,\n        template: {element: 'comments-template'}\n    });\n});","/**\n * Created by batanayi on 2017/08/19.\n */\n\n\n$(function () {\n\n    var TermsViewModel = function(){\n        self = this;\n\n        self.selected = ko.observable('');\n        self.select = function(section){\n            if(self.selected() === section){\n                self.clear();\n            }\n            else{\n                self.selected(section);\n            }\n        };\n\n        self.clear = function(){\n            self.selected('');\n        };\n    };\n\n    ko.components.register('terms', {\n        viewModel: TermsViewModel,\n        template: {element: 'terms-template'}\n    });\n});","/**\n * Created by batanayi on 2017/08/19.\n */\n\n\n$(function () {\n\n    var UserFormViewModel = function (params) {\n        self.firstName = ko.observable(params.first_name ? params.first_name : '').extend({\n            required: {\n                message: 'First name is required.'\n            }\n        });\n        self.lastName = ko.observable(params.last_name ? params.last_name : '').extend({\n            required: {\n                message: 'Last name is required.'\n            }\n        });\n        self.name = function () {\n            return self.firstName() + \" \" + self.lastName();\n        };\n        self.id = ko.observable(params.id ? params.id : '');\n        self.image = ko.observable(params.image ? params.image : '');\n        self.bio = ko.observable(params.bio ? params.bio : '');\n        self.website = ko.observable(params.website ? params.website : '');\n        self.canProfileEdit = ko.observable(false);\n        self.focusedFirstName = ko.observable(false);\n        self.focusedLastName = ko.observable(false);\n        self.focusedBio = ko.observable(false);\n        self.focusedWebsite = ko.observable(false);\n        self.enabled = ko.observable(true);\n\n        self.imageFileData = ko.observable({\n            dataURL: ko.observable(params.image ? params.thumb_x : '')\n        });\n\n        self.imageFileData().dataURL.subscribe(function (dataURL) {\n            self.image(dataURL);\n        });\n\n        self.canSave = function () {\n            return UserFormViewModel.errors().length === 0;\n        };\n        self.focusFirstName = function () {\n            self.focusedFirstName(true);\n        };\n        self.focusLastName = function () {\n            self.focusedLastName(true);\n        };\n        self.focusBio = function () {\n            self.focusedBio(true);\n        };\n        self.focusWebsite = function () {\n            self.focusedWebsite(true);\n        };\n        self.blurFirstName = function () {\n            if (self.firstName().length === 0) {\n                self.focusedFirstName(false);\n            }\n            self.toggleErrors();\n            self.showAllMessages();\n        };\n        self.blurLastName = function () {\n            if (self.lastName().length === 0) {\n                self.focusedLastName(false);\n            }\n            self.toggleErrors();\n            self.showAllMessages();\n        };\n        self.blurBio = function () {\n            if (self.bio().length === 0) {\n                self.focusedBio(false);\n            }\n        };\n        self.blurWebsite = function () {\n            if (self.website().length === 0) {\n                self.focusedWebsite(false);\n            }\n        };\n        self.openSettingsForm = function () {\n            self.showSettingsForm(!self.showSettingsForm());\n        };\n        self.closeSettingsForm = function () {\n            self.showSettingsForm(false);\n        };\n        self.openUserForm = function () {\n            self.showSettingsForm(false);\n            self.showUserForm(!self.showUserForm());\n        };\n        self.closeEditForm = function () {\n            self.showUserForm(false);\n        };\n        self.showAllMessages = function () {\n            UserFormViewModel.errors.showAllMessages();\n        };\n        self.toggleErrors = function () {\n            $(\"._2Kdch\").each(function () {\n                var $this = $(this);\n\n                if ($this.find('span._1u7op').is(':visible')) {\n                    $this.addClass('p5bDW');\n                }\n                else {\n                    $this.removeClass('p5bDW');\n                }\n            });\n        };\n        self.submit = function () {\n            UserFormViewModel.errors.showAllMessages();\n\n            if (self.canSave()) {\n                self.enabled(false);\n\n                var data = JSON.stringify(\n                    {\n                        first_name: self.firstName(),\n                        last_name: self.lastName(),\n                        image: self.image(),\n                        bio: self.bio(),\n                        website: self.website(),\n                        _method: \"PATCH\"\n                    });\n\n                $.ajax({\n                    url: \"/profile/\" + self.id(),\n                    data: data,\n                    type: 'PATCH',\n                    contentType: 'application/json',\n                    success: function (u) {\n                        self.closeEditForm();\n                        self.enabled(true);\n                        var user = ko.utils.parseJson(u);\n                        window.location = '/u/' + user.slug;\n                    }\n                });\n            }\n        };\n\n        if (self.firstName().length > 0) {\n            self.focusFirstName();\n            self.blurFirstName();\n        }\n\n        if (self.lastName().length > 0) {\n            self.focusLastName();\n            self.blurLastName();\n        }\n\n        if (self.bio().length > 0) {\n            self.focusBio();\n        }\n\n        if (self.website().length > 0) {\n            self.focusWebsite();\n        }\n    };\n\n    UserFormViewModel.errors = ko.validation.group(UserFormViewModel);\n\n    ko.components.register('user-form', {\n        viewModel: UserFormViewModel,\n        template: {element: 'user-form-template'}\n    });\n});"]}